# Learning Sandbox: Firebase + Express + Frontend + Supabase

This repository is a hands-on learning project focused on:
- Firebase (Auth, Firestore, Remote Config)
- Backend development with Express.js
- Frontend skills with Vue 3 + Vite
- Expanding to Supabase workflows over time

Current apps:
- `apps/web-app`: Vue 3 + Vite frontend
- `apps/api-server`: Express API that serves demo todo data

## Project Structure

```text
.
├── apps/
│   ├── web-app/
│   └── api-server/
├── package.json
└── package-lock.json
```

## Prerequisites

- Node.js `^20.19.0 || >=22.12.0` (web app engine requirement)
- npm (workspace support; npm 9+ recommended)

## Install Dependencies

From the repository root:

```bash
npm install
```

## Run the Apps

Open two terminals from the repository root.

1. Start the API server (Express on `http://localhost:4000` by default):

```bash
npm run dev:server
```

2. Start the web app (Vite on `http://localhost:5173`):

```bash
npm run dev:client
```

The API CORS configuration currently allows requests from `http://localhost:5173`.

## Available Root Scripts

- `npm run dev:server` - Run backend in watch mode (`nodemon`)
- `npm run dev:client` - Run frontend dev server
- `npm run dev` - Alias for `dev:server`
- `npm run build:client` - Build frontend for production

## API

- `GET /todos` -> returns todos from Supabase `todo_items` when configured, otherwise returns in-memory demo data

Base URL in local development: `http://localhost:4000` (or `PORT` in `apps/api-server/.env`)

## Supabase Setup (Backend Todos Only)

This project can run Firebase for auth/frontend and Supabase only for backend todo items.

1. Copy the API env template:

```bash
cp apps/api-server/.env.example apps/api-server/.env
```

2. Fill in `SUPABASE_URL` and `SUPABASE_SERVICE_ROLE_KEY` in `apps/api-server/.env`.
   `SUPABASE_ANON_KEY` is optional fallback, but service role is recommended for backend APIs.

3. In Supabase SQL editor, create the `todo_items` table:

```sql
create table if not exists public.todo_items (
  id bigint generated by default as identity primary key,
  title text not null,
  completed boolean not null default false
);

insert into public.todo_items (title, completed) values
  ('Buy groceries', false),
  ('Complete Supabase setup', false),
  ('Learn Firebase', true)
on conflict do nothing;
```

4. Run the backend:

```bash
npm run dev:server
```

If `.env` keys are missing, `/todos` falls back to demo in-memory data.

## Learning Focus

- Implement and test Firebase auth/data flows
- Build backend APIs with Express.js
- Practice frontend architecture and UI improvements
- Compare Firebase and Supabase patterns as the project evolves

## Notes

- Firebase config is currently defined directly in `apps/web-app/src/firebase.js`.
- Dashboard fetches todos from `VITE_API_BASE_URL` (default `http://localhost:4000`).
- If you change frontend/backend ports, update:
  - API CORS origin in `apps/api-server/src/app.js`
  - frontend fetch URL in `apps/web-app/src/views/Dashboard.vue`
